# Dream

##### Github链接：https://github.com/ChaoT1de/Dream/edit/main/README.md
##### 游戏名称：Dream  
##### 运行环境：PC/VR  
##### 编辑器：UE5.1.1 & UE5.0.3

## Team
Kunanbayi Shugela： 22044265

Chao Qin： 22017368

Yue Zhan： 21032825

Ou Yang： 22010243

Yunfan Guo： 22039409

Jiayue He： 22012108

# Final Presentation：

## 游戏概念 
《Dream》是一款沉浸式vr体验游戏，玩家作为做梦者，在梦境中探索，玩家将探索一个类似梦境的场景，场景中有很多看似合理但是不该存在的事件和场景，通过探索发现游戏流程中的隐藏剧情彩蛋，玩家将一点一点揭开这个梦境的完整剧情。

## Inspiration
##### 我们将两个梦境作为这个游戏的灵感来源。

梦境1:

和一群人出去旅游，到了一个偏僻的小镇，是一个同行人亲戚所在的小镇。在小巷子里有一群老头老太（五官缺失，眼球有的人多有的人少）在下棋，他的亲戚是一个穿着纯黑的衣服，眼睛裹着黑色的布条的老妇人。这个镇子的男人在战时全被要求从军，因为是临时召集，基本都是炮灰，只有少数能回来，回来的也基本上缺胳膊少腿。后来镇上来了一个医生，带着一个黑盒子（ITeM).只要人们许愿，就能进行肢体交换，用胳膊换腿或牺牲，眼球来获得四肢。有人牺牲了身体器官，使自己获得完整四肢。还可以牺牲自己的身体的器官，与死去的人进行对话和生活。一开始人们只是牺牲眼球来换取自己在战争失去的四肢，但人们逐渐开始进行交易和犯罪，通过绑架暴力等手段强迫别人将手臂，眼球等转移到自己身上，在通过这些四肢眼球等进行交易或进行更加暴力的行为。就这样死去的人越来越多，获得多余器官的人也大多在用多余的器官做着与死去的人一起生活的梦。(From Kun Ouyang)

梦境2:

我参加了学校的培训班，这个培训班有课外活动就是去剧院参观，于是我们走到了剧院的后台，后台像大仓库有很高很大的货架隔开成很多小道，这些小道中都有站一些人，被介绍到说这些都是导演和演员在讨论剧本，我们也要参与到讨论中，在走过一道道货架我发现有很多熟悉的面孔，是我的高中同学大学同学之类的，但是我们擦肩而过的时候，他们似乎都不认识我了。我感到很奇怪但还是继续走向我被安排去的货架过道，与导演讨论过程都很正常，聊 了一会我感到很累可能是长途和工作原因，于是我趁休息到门口旁的油桶上趴着睡了会，迷迷糊糊听到他们集合了再聊剧本，我想着没有叫我就再眯一会。过了一会有个人给我披上了一件衣服说这里太冷了睡觉会感冒的，她说“我是警察学院的，我感觉这里不太对劲我们得逃出去”，我感到很奇怪怎么突然跟我说这些？没等我多问，导演看到我们窃窃私语大声喊向我们过去集合，说周六周天周一要排练周四演出，不能休息，一听说不能休息好多人提出自己有事不能参与排练，问到我我就说我没问题啊，（这时候经过那位姐姐提醒已经开始有点戒备心，于是决定随大流先看看），集合完了就自由活动这时候警察姐姐集合了几位同学计划一起从这里出去这些人都是我的高中同学们，他们意外的认识我（因为之前碰到的同学见到我跟不认识一样），我们就边回忆着高中点滴，在这超大的后台和高大的货架间我们迷路了，于是摸索着找到了一个出口.这里仿佛像一个大的废弃工厂，有很多破旧的小屋子，像一个村落里建的工厂，我们继续边聊天边走着，小伙伴突然说想去卫生间，我就说“好吧，我在这里看着行李你们去吧！要快点 回来！” 于是他们男生女生走向了不同的方向，我看到男生走向一个巨大石头之后感觉被绊倒并且听到一声大喊，我跑过去发现它的头和胳膊都被磕破了眼神里充满了惊慌恐惧，于是我立马说：“你等一下我去拿创口贴。” 我去我的行李里面掏了半天，拿着东西跑过去之后发现他所有的伤都不见了并跟我笑着说：“你怎么来了？”“我给你包扎伤口呀！” “我没事你回去吧”，我感觉特别不对劲，怎么可能这么快所有伤口都没了？但是也不好说什么于是我回到行李边，我越想越不对劲心里的恐惧油然而生，随着心里的恐惧逐渐蔓延我看到了一些我之前没有看到的东西.路边、荒野上、破旧房子边散落着许多美人鱼的尸体，有些变成了干尸有些的正在腐烂，我的恐惧到达了顶峰于是我大喊，这时候朋友们都走过来了，问我怎么了，看到他们回来我稍微心安并讲着我看到的东西，他们不以为然说着“没事啊这里不久是这样嘛”，我想想如果一开始就这样那我之前的小伙伴是不会继续往前走的；会互相讨论为什么这样的；那个摔伤的同学也笑嘻嘻的身上没有任何伤；另一个同学是左撇子，现在他仿佛更愿意 用右手做事情。我害怕极了我感觉这些人都不是我的同学，我只有自己一个人了，我吓到用颤抖的声音大喊，随着我的喊叫声，“我的朋友们”变成了有着丑陋脸庞的美人鱼，我吓的铆足了劲往前跑，想要脱离这些恐怖的东西，但是恐惧使我一直腿软，磕磕绊绊的跑着，最后绊倒在一个大布包上，我坐着向后退，他们慢慢逼近，不知使踩到了什么还是怎样，我被炸飞了。奇迹的是我毫发无伤的飞着，飞的过程当中我看到这些破旧房子的院子，发现其中有一些 院子里的机器仍在运作，相同的是院子里都残破不堪、美人鱼的尸体横横竖竖的散落着。我最终在摔在了一个车站里，我迅速冲向一辆正准备发车的巴士，这时候有位老人说着让这个姑娘先上车，这位老人背了个腰包声音很洪亮感觉是巴士的售票员，我心里十分感激想着这老板真好，是我的救命恩人。坐上了车我盯着窗外，担心那些丑陋的美人鱼追上来，然而并没有，只有很多村民他们感觉像搬家一样拿着很多的东西在车站准备上车，就算坐上车我内心仍然忐忑它们突然追上来拦下车。终于车发动了，我心里不断的默念“快点快点”，终于过了一个巷道拐了弯之后我长舒一口气，开始观察周围的村民大家没有人说话就那么安静的坐着，我旁边坐了一个穿蓝色迷彩服背着大包的同龄人，象征性的聊了两句，他说自己刚在这里服完兵役现在准备回家。听到这个消息我不寒而栗。这是内陆根本没有海在这里怎么服兵役？结束兵役怎么就一个人回？为什么感觉大家都时不时的看我？为什么先让我上车？这个车到底是要去哪里？我真的安全了吗？(From Kunanbayi Shugela)

## 我们将两个梦境结合，讨论并得出以下完整的故事：
### 章节1: 战争开幕
-玩家在战壕里从昏迷中苏醒，被NPC刨出土壤，周围充满爆炸声和混乱的战争场景。
-玩家身上的照片掉落在地上，有一种做旧的感觉。玩家捡起照片，继续与NPC一起逃跑。
-（玩家可以通过跳跃，观察周围的战争环境，但是并不能跳出战壕，战壕尽头停着一辆开着门的巴士）
-（逃跑出后发现其实只是一个影视基地。）

### 章节2: 神秘的电车
-玩家和NPC在战壕尽头簇拥着上了一辆伦敦巴士，玩家上车之前有一位伤员坐在巴士后排的暗处，没有司机，巴士继续行驶。（玩家可以在车上自由活动，活动过程中可以看到后面的影视基地）（巴士动，大概10s，）
-玩家在下车时注意到后排伤员的位置出现了人鱼尾巴，为后续场景做铺垫。
（程序需求：灯光熄灭伤员的腿变成人鱼尾巴，再次亮起，加上骨头生长的音效）

### 章节3: 奇怪的仓库
下了巴士以后，进入仓库，仓库大门关闭
-玩家来到道具存放的大仓库，里面有许多货架和NPC在忙碌。
OS：这些人都是在我的照片上的人
-玩家尝试与照片中熟悉的人进行对话，通过闪回和眨眼进行判断是否是美人鱼，发现端倪，san值降低，仓库门打开（强制玩家出门），玩家出门后，一阵狂奔，累了以后在路上停下休息，发现照片没了，这时候从身后跟上来三个人（其中一个人天生残疾，少一个胳膊，照片上的），将照片交给主人公，给的过程中发现他们都眨眼睛，都是正常人，因为主人公想要再休息一下，便让他们三个先走，休息好继续上路，又遇到了其中那个天生残疾的人，交互的过程中发现他已经不眨眼了，并且残疾治好了，san值降低，后面出现黑色的鱼尾，开始逃跑。

### 章节4: 逃离的巴士
-玩家冲向一辆准备发车的巴士，被一位老售票员让上车。
-玩家担心美人鱼追击，但巴士启动后，周围的村民都静静坐着。
-玩家旁边坐着一个刚完成兵役的人（没有腿），得知准备返回家乡。

### 章节5: 暴力与牺牲的村落
-巴士来到偏僻的村落，人们通过眼皮交换来换取四肢或与死人对话。
-人们开始进行疯狂的交易和犯罪，导致越来越多的人死去。
-玩家发现人们开始为了与死去的人对话和生活 开始用眼皮进行交易。
探索到教堂，里面有一个医生（瘟疫医生），桌上有羊皮纸，写着羊皮纸（下面的规则）补完设定，玩家关闭阅读界面后，发现远处的医生已经到了身前，san值降低，教堂内出现尸体骨骼和血迹，画面逐渐变黑，全黑后出现一句话，”有人在等你的眼皮”。

摘下VR后，人带着面具站在玩家面前。

## 游戏风格
该游戏关键字：哥特式、中世纪、克苏鲁、反战

<img src="https://github.com/ChaoT1de/Dream/assets/126697067/17190f1d-0d6b-4916-b687-c044a9da24f0" width="295px"> <img src="https://github.com/ChaoT1de/Dream/assets/126697067/fe6961db-b6ee-4aba-90e9-83ea9c9a4e16" width="295px"> <img src="https://github.com/ChaoT1de/Dream/assets/126697067/47eee4a0-52f0-498a-b7ac-48365b9887df" width="295px">

<img src="https://github.com/ChaoT1de/Dream/assets/126697067/e2ffdecd-4561-4562-ae03-db0a914a85d3" width="445px"> <img src="https://github.com/ChaoT1de/Dream/assets/126697067/01c4e7b7-2b3c-417e-8c15-28c01ff3a459" width="445px">

<img src="https://github.com/ChaoT1de/Dream/assets/126697067/361f0ae2-6ff0-4f1a-8cfe-9e91db015302" width="295px"> <img src="https://github.com/ChaoT1de/Dream/assets/126697067/c40b70c7-cdf4-49b8-aebb-1d35f606cec3" width="295px"> <img src="https://github.com/ChaoT1de/Dream/assets/126697067/2bb73eaf-75ad-4c75-9657-2222f69b69d7" width="295px">

## 游戏机制
在游戏的设定中，玩家进入的是一个梦境世界，所以不存在对话，会通过自述指示玩家的下一步操作，设置有四个场景转换，分别是战场、地铁、仓库、村庄、逃离路、教堂。场景切换过程中没有额外的过场动画，玩家可以自主移动，从当前的场景自然的过渡到下一个场景，完全掌控游戏进程和探索节奏。这使得游戏体验更加流畅和连贯。当玩家遇到游戏当中的特定事件时会导致san值降低，如有视效黑雾气，自述乱码，心跳，屏幕滤镜，耳鸣等，可以使玩家在游戏中体验到角色的心理变化，进一步丰富了游戏的深度和体验。

## 开发过程
### 我们先将两个梦境的故事进行了梳理、改编、结合、创新，使用了谷歌文档，UE5、Xmind。
### 周记1：项目启动和概念确定
本周是我们开始开发UE5体验类VR游戏的第一周。首先，我们召集了整个团队进行项目启动会议。会议上，我们明确了项目的目标和愿景，确定了游戏的概念和核心要素。我们决定开发一款以冒险和解谜为主题的VR游戏，玩家可以通过触摸、抓取和操作虚拟环境中的物体来探索世界。
这一周我们开始进行详细的概念设计和需求分析。我们讨论了游戏的关卡设计、游戏机制、用户界面等方面的要求，并进行了初步的草图和概念原型的制作。此外，我们还确定了项目的开发计划和时间表。
总的来说，本周的重点是确立项目的方向和目标，并明确了游戏的概念和核心要素。接下来的几周，我们将进一步完善概念设计，并开始着手开发游戏的具体内容。

<img src="https://github.com/ChaoT1de/Dream/assets/126697067/ffd68043-25ba-46f3-8d3c-d0dea94455d4" width="1000px">


### 周记2:概念设计和场景搭建
本周我们继续进行概念设计和游戏开发的工作。根据上周的讨论和草图，我们深入研究了游戏的关卡设计和游戏机制，并着手制作游戏流程图来更清晰地表达游戏的整体结构和玩法。
同时，我们进行了一些原画的尝试，但后来发现我们可以直接进行场景搭建来更直观地呈现游戏的环境和氛围。利用UE5提供的强大工具和资源，我们小组成员开始分开去创建游戏中的几个关键场景。在创建关键场景的过程中，这周还制作了游戏的流程图，并在此基础上进一步完善关卡设计和游戏机制。
下一步，我们将继续进行场景搭建，并逐渐完善游戏的细节和交互内容。同时，我们开始蓝图的学习，为后面的蓝图链接做铺垫。

##### 问题：

1.学生账户的权限问题导致的学校公共电脑的系统无法正常使用虚幻引擎。解决方案是自行购买VR设备。


### 周记3：场景搭建和蓝图并行
本周我们继续进行场景搭建和蓝图制作的工作。重点是将各个团队成员分工制作的场景进行合并，并解决在合并过程中遇到的问题。
然而，在场景合并的过程中，我们遇到了一些挑战。其中一个主要问题是一些模型过大导致电脑过载。为了解决这个问题，我们开始对模型进行优化。通过减少面数、调整材质和纹理的分辨率等方法，我们能够降低模型的复杂度，并提高场景的性能。另外，我们也开始根据游戏流程对模型进行优化。根据游戏的需要，我们对场景进行了场景布局和模型细节的调整，以提升游戏的可玩性和沉浸感。
同时，我们也继续进行蓝图制作，实现游戏中的交互逻辑和功能。我们将蓝图与场景进行整合，并进行测试和调试，以确保游戏的流畅性和稳定性。
本周的工作主要集中在场景合并和模型优化方面。通过优化和调整，我们能够更好地控制场景的性能，并使其符合游戏的需求。接下来，我们将继续进行场景和蓝图的完善，并逐步进行测试和迭代，以确保游戏的质量和用户体验达到最佳状态。

##### 问题：

1.因设备显存运行内存不够 导致虚幻引擎崩溃。解决方案是对模型贴图的分辨率和重点光照渲染区域进行调整，将一镜式体验改为加载关卡，优化程序化生成的植被在动态照明中的负载。

2.ue5各版本的路径冲突导致无法下载虚幻引擎。解决方案是连接手机热点（？奇怪的方案）再切换回WIFI。

<img src="https://github.com/ChaoT1de/Dream/assets/126697067/18aef99e-6e6b-453f-bd3d-558bf9a64cd8" width="1000px">


### 周记4:场景搭建和蓝图并行
本周我们继续进行场景搭建和UE5蓝图制作的工作。团队成员将精力分配到这两个方面，以确保游戏的场景和交互系统能够同步推进。
在场景搭建方面，我们遇到了一些挑战，特别是在快速表现植被和重新塑造地形方面。为了解决这些问题，我们进行了一些实践和尝试。我们发现利用UE5的植被绘制工具和地形编辑器可以有效地加快植被的布置和地形的调整。通过使用合适的植被资源和调整其参数，我们能够快速地营造出自然和丰富的场景。但是这也导致了一个问题就是地形编辑器和植被绘制工具会使光照系统带来的性能消耗变大。
同时，我们也在进行蓝图制作，这是我们进行游戏交互系统设计和功能实现的关键。由于蓝图是一项较为复杂的任务，我们采取了线上现场学习的方式。团队成员在学习的过程中遇到了一些困难，但通过互相协助和在线资源的支持，我们逐渐掌握了UE5蓝图的基本原理和应用方法，并开始实际编写蓝图来实现游戏中的交互逻辑。
本周的工作相对较为复杂和技术性，但我们克服了一些问题并取得了一些进展。下一步，我们将继续进行场景搭建和蓝图制作的工作，并注重优化和调整细节，以确保游戏的视觉效果和交互体验达到预期的水平。我们也将继续学习和探索UE5的功能，以更好地支持游戏的开发进程。

##### 问题

1.人物在游戏运行的过程中行动过快，通过调整输入的映射缩放解决

<img src="https://github.com/ChaoT1de/Dream/assets/126697067/c6f833af-8da3-41bb-9f8d-3c428981a672" width="1000px">


### 周记5:蓝图和场景调试
本周是我们开发UE5体验类VR游戏的最后一周，通过对前几周的总结，我们决定着重对场景进行优化，以确保游戏拥有流畅的的功能运行和场景表现。主要优化模型贴图的分辨率，非重要区域的光照表现，调整非重要动态光影和调整静态光照的烘焙效果，在流程上
在蓝图方面，我们仔细检查和测试了游戏中的各种交互逻辑和功能。我们逐个检查蓝图节点的连接和参数设置，确保它们按照设计要求正确地工作。同时，我们进行了多次测试和调试，以发现并解决潜在的问题和错误。通过这些努力，我们能够确保游戏的交互系统能够顺利运行，玩家可以正确地与虚拟环境进行互动。
在场景调试方面，我们注重细节和性能的优化。我们检查了光照和材质的设置，确保场景的视觉效果达到预期的水平。我们还进行了性能测试，以找出可能导致帧率下降或卡顿的问题，并进行相应的优化。通过调试和优化，我们能够提升游戏的视觉质量和流畅性，为玩家创造更好的体验。
本周的工作是整个开发过程的收尾阶段，我们将所有的努力都投入到蓝图和场景的调试上。通过仔细检查和测试，我们确保游戏的功能正常运行，并力求提供给玩家最好的游戏体验。同时，我们也对游戏进行了最后的优化，以确保其在性能和视觉效果上都达到了预期的标准。
开发过程中的每一周都是团队不断努力的结果，而这最后一周更是团队合作的巅峰时刻。我们将持续关注用户反馈，并进行后续的更新和改进，以进一步提升游戏的质量和乐趣。

##### 问题：

1.投射阴影的重叠可移动光源过多，阴影投射被禁用。解决方案是逐个手动调整可移动光源的衰减半径和椎体外部角度。

2.VR人物模型没有与地面建立摩擦，导致在火车场景中，主角无法跟随火车保持一致运动。解决办法是寻找具有碰撞体积的模型卡住人物模型。

3.对于特定的角色模型，需要构建特定的骨骼体，对于此类模型进行编译骨骼动画会导致骨骼动画不好绑定，导致一些人物模型不能实现特定动作。

<img src="https://github.com/ChaoT1de/Dream/assets/126697067/74a124b8-6875-4cda-9700-a48d451a819a" width="1000px">

<img src="https://github.com/ChaoT1de/Dream/assets/126697067/78f1a32c-7a50-43fe-bcbe-6671c1a32722" width="1000px">


### 周记6:测试
本周我们进行了游戏的测试，并在测试过程中遇到了一些问题。我们注重测试游戏的功能和用户体验，以发现潜在的问题和改进的空间。
其中一个问题是VR链接的稳定性。我们发现在某些情况下，VR设备与游戏的连接会出现问题，导致玩家无法正常体验游戏。为了解决这个问题，我们进行了一系列的测试和调试，包括检查设备和驱动程序的兼容性，以及优化游戏的VR交互逻辑。通过这些努力，我们能够提高VR链接的稳定性。
另一个问题是因为高模型导致电脑过载。我们在游戏开发过程中使用了一些复杂的模型和资源，但这也导致了电脑性能的压力。为了解决这个问题，我们进行了模型的优化和压缩，包括减少面数、使用低分辨率的纹理等。通过优化模型，我们能够降低游戏的硬件要求，使其在更广泛的设备上运行流畅。
另外，我们还遇到了版本问题和UE5.1功能整合的挑战。由于我们使用的是UE5.1版本，在整合功能和蓝图时遇到了一些问题，因为一些旧版本的映射无法找到。为了解决这个问题，我们进行了版本迁移和映射的调整，并与团队成员密切合作，共同解决了这些问题。
本周的工作主要集中在游戏的测试和问题解决上。通过测试，我们发现了一些存在的问题，并积极采取措施进行改进和优化。我们也意识到版本管理的重要性，以确保团队成员之间的工作协同和功能整合的顺利进行。
下一步，我们将根据测试结果和用户反馈进行相应的改进和优化，以进一步提升游戏的质量和用户体验。同时，我们也将继续关注VR链接和性能优化方面的问题，以确保游戏能够在各种设备上流畅运行，并给玩家带来良好的沉浸感。

##### 问题：

1.设备连接出现问题，每当想要重新打开虚幻引擎的时候，STEAMVR会自动重启导致虚幻引擎闪退。解决方法是优先连接VR设备最后启动STEAMVR。

<img src="https://github.com/ChaoT1de/Dream/assets/126697067/3ac6b404-6d5d-4fad-a76a-8956efa35a63" width="1000px">

<img src="https://github.com/ChaoT1de/Dream/assets/126697067/21a5cef6-5383-44d7-a281-1a69fea8dc2d" width="1000px">


## 人员分工

欧阳琨：            村庄场景搭建，概念讨论，编写日志，提供脚本，收集概念图，游戏细节讨论

展玥：              仓库和教堂场景搭建，概念讨论，提供脚本，游戏细节讨论，摄影，剪辑视频，编写日志

曙格拉 库南巴依：    逃离路场景搭建，概念讨论，编写日志，场景搭建，提供脚本，游戏细节讨论，摄影，剪辑视频

秦潮：             战场场景搭建，总体场景合并，光照效果及贴图优化，概念讨论，收集概念图，游戏细节讨论，编写日志

郭云帆：            蓝图调试，蓝图交互实现，编写人物互动AI蓝图，概念讨论，音效收集，流程图，游戏细节讨论，编写日志

何佳玥：            逃离路场景搭建，概念讨论，音效收集和处理，场景搭建，游戏细节讨论，编写日志


## 已知问题 

1.大型无转场场景的沉浸式体验在VR设备中的表现欠佳。

2.虚幻引擎5所带来的新技术如Nanite、lumen、在5.0.3版本的VR场景无法获得支持。

3.虚幻引擎5在5.1.1版本放弃旧版操作映射改为增强输入所带来的VR手柄一些按键映射冲突的问题，由于时间问题没有对此进行深究，所以一些蓝图无法在5.1版本实现，以至于VR人物的部分蓝图只可能在5.0进行编译。

4.因为设备原因演示视频和录屏对不上。

5.不知道什么问题导致的场景过爆。（或许是缺少体积雾）

6.不知道什么原因导致的VrPawn的视角过低。

7.程序化生成的地形和VR模版不兼容导致的因视角变化而畸变的地形。

8.对于VR人物角色，VRpawn和VRcarakter在人物模型上有区别，VRcarakter有实体，但VRpawn没有，我们在做的过程中没有意识到VRpawn没有实体，由于时间问题，后续没有进行更改，导致VRpawn经常出现穿模。

9.出于不知名原因，地形在编译前和编译后不一样，同时导致地形雕刻过程中经常发生虚幻引擎崩溃的问题。


## 未来发展
丰富场景：增加和故事相关的物品，丰富画面的细节和灯光，重点强调场景的统一性，增强故事的真实性，让故事更加完整真实，让玩家更能沉浸在引人入胜的故事。
增加交互情情节和彩蛋：完善NPC的动作，增加玩家和NPC互动的沉浸感。增强交互道具中交互行为的流畅性，给玩家带来更好的探索体验。
增加技术性：加入人工智能和机器学习，给玩家提供个性化和智能化的游戏体验，使游戏更具吸引力和互动性的学习体验，NPC将会更具玩家的行为做出实时回应，给玩家提供前所未有的沉浸、互动和个性化体验。


## 总结
我们想打造一个诡异，奇幻的探索体验，使用vr设备让玩家能够更加沉浸在我们精心设计的场景。大家积极努力，协同合作。通过交流，讨论，将大家的想法发散、结合起来，最终打造成了这样一个游戏。我们将会继续打磨、改善我们的游戏，给玩家带来更好，更沉浸的体验。




